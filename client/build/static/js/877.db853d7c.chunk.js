"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[877],{374:function(e,n,r){r.d(n,{xJ:function(){return i},IU:function(){return l},zk:function(){return u}});var t=r(5861),a=r(7757),s=r.n(a),c=r(859),o=r(9396),i=function(e,n){return function(){var r=(0,t.Z)(s().mark((function r(t){var a,i,l;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.xJ(e);case 3:a=r.sent,i=a.data,t({type:c.Bp,payload:i}),n("/store"),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0),t({type:c.Ny,payload:(null===r.t0||void 0===r.t0||null===(l=r.t0.response)||void 0===l?void 0:l.data.message)||"Internal Server Error. Please try again later"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},l=function(e,n){return function(){var r=(0,t.Z)(s().mark((function r(t){var a,i,l;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.IU(e);case 3:a=r.sent,i=a.data,t({type:c.eS,payload:i}),n("./verify"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),t({type:c.Ny,payload:(null===(l=r.t0.response)||void 0===l?void 0:l.data.message)||"Internal Server Error. Please try again later"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},u=function(e){return function(){var n=(0,t.Z)(s().mark((function n(r){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{o.zk(e)}catch(a){r({type:c.Ny,payload:(null===(t=a.response)||void 0===t?void 0:t.data.message)||"Internal Server Error. Please try again later"})}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},9396:function(e,n,r){r.d(n,{DA:function(){return s},xJ:function(){return c},IU:function(){return o},jn:function(){return i},lm:function(){return l},zk:function(){return u},FQ:function(){return d},b2:function(){return m},af:function(){return p},dA:function(){return h},h8:function(){return f},JE:function(){return x}});var t=r(4569),a=r.n(t)().create({baseURL:"http://localhost:5000"});a.interceptors.request.use((function(e){return localStorage.getItem("profile")?e.headers.authentication="Bearer: ".concat(JSON.parse(localStorage.getItem("profile")).token):sessionStorage.getItem("profile")&&(e.headers.authentication="Bearer: ".concat(JSON.parse(sessionStorage.getItem("profile")).token)),e}));var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.get("products/".concat(e))},c=function(e){return a.post("/users/signin",e)},o=function(e){return a.post("/users/signup",e)},i=function(e){return a.post("/promo-codes/validate",e)},l=function(e){return a.get("/users/validate/".concat(e))},u=function(e){return a.post("/users/sendVerificationEmail",e)},d=function(){return a.get("/users/fetchUserData")},m=function(e){return a.post("/users/removeItemFromUserData",e)},p=function(e){return a.post("/users/addProductToLikedList",e)},h=function(e){return a.post("/users/addProductToCart",e)},f=function(e){return a.delete("/users/deleteUser",e)},x=function(e){return a.post("/payments/create-checkout-session",e)}},8877:function(e,n,r){r.r(n),r.d(n,{default:function(){return G}});var t=r(1413),a=r(5861),s=r(885),c=r(7757),o=r.n(c),i=r(2791),l=r(6871),u=r(929),d=r(859),m=r(7022),p=r(9743),h=r(2677),f=r(5313),x=r(9140),g=r(3161),j=r(3360),y=r(2469),v=r(4849),b=r(9126),Z=r(6355),N=r(5880),w=r(7692),k=r(828),I=r(8820),C=r(2506),S=r(6863),P=r(7147),A=r.n(P),T=r(6030),U=r(374),F=r(8007);var J=r.p+"static/media/auth-background.644170d59660de44cf23f5f8081a5a8b.svg",L=r(184),_=S.Ry().shape({firstName:S.Z_().min(3,"Must be at least 3 characters").max(40,"Must be 40 characters or less.").required(),lastName:S.Z_().min(3,"Must be at least 3 characters").max(40,"Must be 40 characters or less.").required(),email:S.Z_().email("Invalid email").required(),country:S.Z_().required("Select your country from the list"),password:S.Z_().min(8,"Password must be between 8 and 40 characters").max(40,"Password must be between 8 and 40 characters").required(),confirmPassword:S.Z_().oneOf([S.iH("password"),null],"Password does not match").required()}),E=S.Ry().shape({email:S.Z_().email("Invalid email").required(),password:S.Z_().min(8,"Password must be between 8 and 40 characters").max(40,"Password must be between 8 and 40 characters").required()});var G=function(){console.log("rendering");var e=JSON.parse(localStorage.getItem("profile")?localStorage.getItem("profile"):sessionStorage.getItem("profile")),n=sessionStorage.getItem("theme"),r="dark"===n?"light":"dark",c=(0,T.v9)((function(e){return e.auth.errors}));(0,T.v9)((function(e){return console.log("state",e)}));var S=(0,i.useState)(!1),P=(0,s.Z)(S,2),G=P[0],V=P[1],q=(0,i.useState)(!1),O=(0,s.Z)(q,2),R=O[0],M=O[1],z=(0,i.useState)(null),D=(0,s.Z)(z,2),H=D[0],B=D[1],K=(0,i.useState)(!1),Q=(0,s.Z)(K,2),X=Q[0],Y=Q[1],W=(0,T.I0)(),$=(0,l.s0)(),ee=(0,i.useRef)();(0,i.useEffect)((function(){function e(){return(e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return e.next=3,fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(e){B({countryCode:e.country_code,countryName:e.country_name,ip:e.ip,internetProvider:e.org,currency:e.currency})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),(0,i.useEffect)((function(){Y(!1)}),[c]);var ne=function(){var e=(0,a.Z)(o().mark((function e(n){var r,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.profileObj,a=n.tokenId,s={firstName:r.givenName,lastName:r.familyName,email:r.email,country:H.countryCode,password:r.googleId,confirmPassword:r.googleId,rememberMe:!1},e.next=5,ee.current.executeAsync();case 5:c=e.sent,ee.current.reset(),W(G?(0,U.IU)((0,t.Z)((0,t.Z)({},s),{},{recaptchaToken:c,googleToken:a,ip:H.ip}),$):(0,U.xJ)((0,t.Z)((0,t.Z)({},s),{},{recaptchaToken:c,googleToken:a,ip:H.ip}),$));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(e){console.log("google unsuccessful",e)};return e?(0,L.jsx)(l.Fg,{to:"/"}):H?(0,L.jsxs)(i.Fragment,{children:[(0,L.jsx)(y.Z,{role:"alert",variant:"".concat("dark"===n?"dark":"danger"),className:"alert_ fs-5 d-flex align-items-center justify-content-center",show:c,dismissible:!0,onClose:function(){return W({type:d.kl,payload:null})},children:(0,L.jsxs)("span",{children:[(0,L.jsx)(I.sQg,{size:"30"}),"\xa0\xa0\xa0",c]})}),(0,L.jsx)(F.Z,{sitekey:"6LeZaGQcAAAAAEGWMTskIXYc3u_s7KxiX7l0Rt82",size:"invisible",badge:"bottomright",ref:ee,theme:n}),(0,L.jsxs)("div",{className:"my-5 mx-md-5 p-2 d-flex justify-content-md-start justify-content-center align-items-center",children:[(0,L.jsxs)(x.Z,{className:"n shadow-lg border border-primary border-2",bg:n,text:r,children:[(0,L.jsx)(x.Z.Title,{className:"text-primary text-center my-4",children:(0,L.jsx)("h3",{children:G?"Sign Up":"Sign In"})}),(0,L.jsx)(x.Z.Body,{children:(0,L.jsx)(C.J9,{validationSchema:G?_:E,onSubmit:function(){var e=(0,a.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,ee.current.executeAsync();case 3:r=e.sent,ee.current.reset(),W({type:d.kl}),Y(!0),W(G?(0,U.IU)((0,t.Z)((0,t.Z)({},n),{},{recaptchaToken:r,ip:H.ip}),$):(0,U.xJ)((0,t.Z)((0,t.Z)({},n),{},{recaptchaToken:r,ip:H.ip}),$));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),initialValues:{firstName:"wee",lastName:"wee",email:"development.acc5@gmail.com",country:H.countryName,countryCode:H.countryCode,password:"dg7ugyjyj6h",confirmPassword:"dg7ugyjyj6h",rememberMe:!1,internetProvider:H.internetProvider,currency:H.currency},children:function(e){var t=e.handleSubmit,a=e.handleChange,s=e.handleReset,c=e.values,o=e.touched,l=e.errors;return(0,L.jsx)(f.Z,{noValidate:!0,onSubmit:t,children:(0,L.jsxs)(m.Z,{fluid:"md",children:[G&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("p",{className:"lead fs-2 ",children:"Personal Info"}),(0,L.jsxs)(f.Z.Group,{as:h.Z,className:"mb-3 ps-4",children:[(0,L.jsxs)(f.Z.Label,{children:["First Name ",(0,L.jsx)("span",{className:"text-danger",children:"*"})]}),(0,L.jsxs)(g.Z,{hasValidation:!0,className:"mb-2",children:[(0,L.jsx)(g.Z.Text,{children:(0,L.jsx)(b.cHS,{})}),(0,L.jsx)(f.Z.Control,{className:"bg-".concat(n," text-").concat(r),name:"firstName",type:"text",value:c.firstName,onChange:a,isInvalid:o.lastName&&!!l.firstName,placeholder:"John"}),(0,L.jsx)(f.Z.Control.Feedback,{type:"invalid",children:l.firstName})]})]}),(0,L.jsxs)(f.Z.Group,{as:h.Z,className:"mb-3 ps-4",controlId:"last-name",children:[(0,L.jsxs)(f.Z.Label,{children:["Last Name ",(0,L.jsx)("span",{className:"text-danger ",children:"*"})]}),(0,L.jsxs)(g.Z,{hasValidation:!0,className:"mb-2",children:[(0,L.jsx)(g.Z.Text,{children:(0,L.jsx)(b.cHS,{})}),(0,L.jsx)(f.Z.Control,{className:"bg-".concat(n," text-").concat(r),name:"lastName",type:"text",value:c.lastName,onChange:a,isInvalid:o.lastName&&!!l.lastName,placeholder:"Smith"}),(0,L.jsx)(f.Z.Control.Feedback,{type:"invalid",children:l.lastName})]})]})]}),G&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(f.Z.Group,{as:h.Z,className:"mb-3 ps-4",controlId:"Country",children:[(0,L.jsxs)(f.Z.Label,{children:["Country ",(0,L.jsx)("span",{className:"text-danger ",children:"*"})]}),(0,L.jsxs)(g.Z,{hasValidation:!0,className:"mb-2 ",children:[(0,L.jsx)(g.Z.Text,{children:(0,L.jsx)(Z.Nh4,{})}),(0,L.jsx)(f.Z.Select,{name:"country",className:"bg-".concat(n," text-").concat(r),defaultValue:H.countryName,isInvalid:!!l.country,onChange:a,children:Object.keys(null===A()||void 0===A()?void 0:A().countries).map((function(e){var n=null===A()||void 0===A()?void 0:A().countries[e].name;return A().countries[e].continent===d.EU?(0,L.jsx)("option",{value:n,children:n},n):null}))}),(0,L.jsx)(f.Z.Control.Feedback,{type:"invalid",children:l.country})]})]}),(0,L.jsx)("hr",{className:"mt-5"}),(0,L.jsx)("p",{className:"lead fs-2 mb-3",children:"Account Info"})]}),(0,L.jsxs)(f.Z.Group,{as:h.Z,className:"mb-3 ".concat(G?"ps-4":""),controlId:"email-address",children:[(0,L.jsxs)(f.Z.Label,{children:["Email ",(0,L.jsx)("span",{className:"text-danger ",children:"*"})]}),(0,L.jsxs)(g.Z,{hasValidation:!0,className:"mb-2",children:[(0,L.jsx)(g.Z.Text,{className:"fw-bold",children:"@"}),(0,L.jsx)(f.Z.Control,{className:"bg-".concat(n," text-").concat(r),name:"email",type:"email",value:c.email,onChange:a,isInvalid:o.email&&!!l.email,placeholder:"JohnSmith@service.com"}),(0,L.jsx)(f.Z.Control.Feedback,{type:"invalid",children:l.email})]})]}),(0,L.jsxs)(f.Z.Group,{as:h.Z,className:"mb-3 ".concat(G?"ps-4":""),controlId:"password",children:[(0,L.jsxs)(f.Z.Label,{children:["Password ",(0,L.jsx)("span",{className:"text-danger ",children:"*"})]}),(0,L.jsxs)(g.Z,{hasValidation:!0,className:"mb-2",children:[(0,L.jsx)(g.Z.Text,{children:(0,L.jsx)(N.KJ0,{})}),(0,L.jsx)(f.Z.Control,{className:"bg-".concat(n," text-").concat(r),name:"password",type:"password",value:c.password,onChange:a,isInvalid:o.password&&!!l.password,placeholder:"Password"}),(0,L.jsx)(f.Z.Control.Feedback,{type:"invalid",children:l.password})]})]}),G&&(0,L.jsxs)(f.Z.Group,{as:h.Z,className:"mb-3 ps-4",controlId:"confirm-password",children:[(0,L.jsxs)(f.Z.Label,{children:["Confirm Password ",(0,L.jsx)("span",{className:"text-danger ",children:"*"})]}),(0,L.jsxs)(g.Z,{hasValidation:!0,className:"mb-2",children:[(0,L.jsx)(g.Z.Text,{children:(0,L.jsx)(N.KJ0,{})}),(0,L.jsx)(f.Z.Control,{className:"bg-".concat(n," text-").concat(r),name:"confirmPassword",type:R?"text":"password",value:c.confirmPassword,onChange:a,isInvalid:o.confirmPassword&&!!l.confirmPassword,placeholder:" Confirm Password"}),(0,L.jsx)(j.Z,{variant:"outline-secondary",onClick:function(){return M((function(e){return!e}))},children:R?(0,L.jsx)(w.nJ9,{}):(0,L.jsx)(w.A7v,{})}),(0,L.jsx)(f.Z.Control.Feedback,{type:"invalid",children:l.confirmPassword})]})]}),!G&&(0,L.jsx)(p.Z,{className:" mt-3",children:(0,L.jsxs)(h.Z,{children:[(0,L.jsx)(f.Z.Label,{hidden:!0,children:"Remember me"}),(0,L.jsx)(f.Z.Check,{name:"rememberMe",className:"m-2",type:"checkbox",label:"Remember me",onChange:a})]})}),(0,L.jsx)("hr",{className:"my-5"}),(0,L.jsxs)(p.Z,{className:"mt-2",children:[(0,L.jsx)(j.Z,{type:"submit",disabled:X,children:X?(0,L.jsxs)(i.Fragment,{children:[(0,L.jsx)(v.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),(0,L.jsx)("span",{children:" Loading... "})]}):G?"Sign Up":"Sign In"}),(0,L.jsx)("span",{className:"fs-6 text-center",children:"OR"}),(0,L.jsx)(u.GoogleLogin,{clientId:"321237757656-je75pash2i5cs83oss0ebri1p9fgqbub.apps.googleusercontent.com",render:function(e){return(0,L.jsxs)(j.Z,{variant:"outline-primary",className:"my-2",onClick:e.onClick,onClickCapture:function(){W({type:d.kl})},disabled:e.disabled||X,children:[(0,L.jsx)(k.U1m,{}),(0,L.jsxs)("span",{children:[G?" Sign Up ":" Sign In ","with Google"]})]})},onSuccess:ne,onFailure:re,cookiePolicy:"single_host_origin"})]}),(0,L.jsx)(p.Z,{className:"mt-2",children:(0,L.jsx)("button",{className:"switch-btn w-100 my-2 text-muted text-end",type:"button",onClick:function(){V((function(e){return!e})),W({type:d.kl,payload:null}),s()},children:G?"ALREADY HAVE AN ACCOUNT? SIGN IN":"DON'T HAVE AN ACCOUNT? SIGN UP"})})]})})}})})]}),(0,L.jsx)("img",{className:"r",src:J,alt:"background","aria-hidden":"true"})]})]}):null}}}]);
//# sourceMappingURL=877.db853d7c.chunk.js.map